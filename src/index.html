<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>Vite App</title>
    <style>
    </style>
  </head>
  <body>
    <div id="loading-screen">
      <p id="loading-text">Loading...</p>
      <svg class="spinner" width="120" height="120" viewBox="0 0 120 120">
        <circle class="path" fill="none" stroke-width="16" stroke-miterlimit="10" cx="60" cy="60" r="48"></circle>
      </svg>
      <button id="enter-button" disabled>Enter Website</button>
    </div>
    <div id="scroll-container">
      <nav id="navbar">
        <ul>
          <li><a href="#about">About</a></li>
          <li><a href="#events">Events</a></li>
          <li><a href="#projects">Projects</a></li>
        </ul>
        <div id="logo">
          <a href="#top">
            <img src="static/images/logo-no-background.png" alt="Logo">
          </a>
        </div>
      </nav>
      <div id="app"><canvas id="bg"></canvas></div>

      <main>
        <header class="hero">
          <h1 id="title">GUAIS</h1>
          <p>Welcome to Glasgow University AI Society!</p>
        </header>

        <div id="scene-start"></div>
        <div id="torusText">
          Approaching the torus...
        </div>

        <section id="about">
          <h2>About</h2>
          <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed divinus protactus</p>
          <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed divinus protactus</p>
          <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed divinus protactus</p>
          <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed divinus protactus </p>
        </section>

        <blockquote>
          <p>This is our Society's digital portfolio</p>
        </blockquote>

        <section id="events" class="left">
          <h2>Events</h2>
          <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed divinus protactus</p>
          <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed divinus protactus</p>
          <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed divinus protactus</p>
          <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed divinus protactus</p>
        </section>
        <blockquote id="blockquote1">
          <p>This is our Society's digital portfolio</p>
        </blockquote>
        <section id="projects">
          <h2>Projects</h2>
          <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed divinus protactus</p>
          <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed divinus protactus</p>
          <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed divinus protactus</p>
          <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed divinus protactus</p>
        </section>

        <blockquote>
          <p>This is our Society's digital portfolio</p>
        </blockquote>
        <div id="divider2"></div>
        <div id="content">
          <h2>Content</h2>
          <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed divinus protactus ipsum dolor sit amet</p><br>
          <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed divinus protactus ipsum dolor sit amet</p>
          <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed divinus protactus ipsum dolor sit amet</p><br>
          <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed divinus protactus ipsum dolor sit amet</p>
          <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed divinus protactus ipsum dolor sit amet</p><br>
          <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed divinus protactus ipsum dolor sit amet</p>
          <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed divinus protactus ipsum dolor sit amet</p><br>
        </div>
        <div id="placeholder"></div>
        <div id="cta">
          <h2>CTA</h2>
          <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed divinus protactus ipsum dolor sit amet</p>
          <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed divinus protactus ipsum dolor sit amet</p><br>
          <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed divinus protactus ipsum dolor sit amet</p>
          <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed divinus protactus ipsum dolor sit amet</p>
          <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed divinus protactus ipsum dolor sit amet</p><br>
          <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed divinus protactus ipsum dolor sit amet</p>
          <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed divinus protactus ipsum dolor sit amet</p><br>
          <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed divinus protactus ipsum dolor sit amet</p>
          <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed divinus protactus ipsum dolor sit amet</p><br>
        </div>
        <div id="content1">
          <h2>Content</h2>
          <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed divinus protactus ipsum dolor sit amet</p>
          <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed divinus protactus ipsum dolor sit amet</p><br>
          <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed divinus protactus ipsum dolor sit amet</p>
          <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed divinus protactus ipsum dolor sit amet</p>
          <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed divinus protactus ipsum dolor sit amet</p><br>
          <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed divinus protactus ipsum dolor sit amet</p>
          <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed divinus protactus ipsum dolor sit amet</p><br>
          <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed divinus protactus ipsum dolor sit amet</p>
          <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed divinus protactus ipsum dolor sit amet</p><br>
        </div>

        <div id="footer">
          <h3>GUAIS</h3>
          <div class="footer-links">
            <ul>
              <h4>Pages</h4>
              <li><a href="#about">About</a></li>
              <li><a href="#events">Events</a></li>
              <li><a href="#projects">Projects</a></li>
              
            </ul>
            <ul>
              <h4>Content</h4>
              <li><a href="#divider2">Content</a></li>
              <li><a href="#cta">CTA</a></li>
              <li><a href="#content1">Content1</a></li>
            </ul>
            <ul>
              <h4>Resources</h4>
              <li>
              <li> <a href="#">Blog</a></li>
              <li> <a href="#">Contact</a></li>
              <li><a href="#">Support</a></li>
            </ul>
            <ul>
              <h4>Legal</h4>
              <li><a href="#">Privacy Policy</a></li>
              <li><a href="#">Terms of Service</a></li>
            </ul>
          </div>
        </div>

      </main>
    </div>
    <script>
      window.addEventListener('scroll', function() {
        const navbar = document.querySelector('#navbar');
        const content = document.querySelector('#divider2');
        const contentPosition = content.getBoundingClientRect().bottom;
        var contentDiv = document.querySelector('#content');
      
        if (contentPosition <= 125 || contentDiv.classList.contains('fixed')) {
          navbar.style.backgroundColor = '#9769EF';
          
        } else {
          navbar.style.backgroundColor = 'transparent';
        }
      });
      var scrollHeight = 0
      window.addEventListener('scroll', function() {
        var contentDivs = document.querySelectorAll('#content');
        var placeholder = document.getElementById('placeholder');
        var footer = document.getElementById('footer');

        contentDivs.forEach(function(contentDiv, index) {
          var rect = contentDiv.getBoundingClientRect();
          var footerRect = footer.getBoundingClientRect();
          var observer = new ResizeObserver(function() {
            var computedStyle = window.getComputedStyle(contentDiv);
            var paddingTop = parseInt(computedStyle.paddingTop);
            var paddingBottom = parseInt(computedStyle.paddingBottom);

            placeholder.style.height = `${contentDiv.offsetHeight + paddingTop + paddingBottom}px`;
          });
          observer.observe(contentDiv);
          
          if (rect.top <= 55 && !contentDiv.classList.contains('fixed')) {
            contentDiv.classList.add('fixed');
            placeholder.classList.add('placeholder');
            contentDiv.style.paddingBottom = `90px`;
            scrollHeight = window.scrollY
          } else if (window.scrollY < scrollHeight && contentDiv.classList.contains('fixed')) {
            contentDiv.classList.remove('fixed');
            placeholder.classList.remove('placeholder');
            contentDiv.style.paddingBottom = '0';
          }
        });
      });
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/gsap.min.js"></script>
    <script type="module" src="/main.js"></script>
    <script>
      const navLinks = document.querySelectorAll('nav ul a, #footer a');
      navLinks.forEach(link => {
        link.addEventListener('click', function(e) {
          e.preventDefault();
          const target = document.querySelector(this.getAttribute('href'));
          const targetPosition = target.offsetTop - window.innerHeight / 2 + target.offsetHeight / 2;
          window.scrollTo({
            top: targetPosition,
            behavior: 'smooth'
          });
        });
      });
      window.addEventListener('load', function() {
        const loadingScreen = document.getElementById('loading-screen');
        const enterButton = document.getElementById('enter-button');
        const loadingText = document.getElementById('loading-text');
        const spinner = document.querySelector('.spinner');
        const body = document.body;
      
        body.style.overflow = 'hidden';
      
        setTimeout(function() {
          enterButton.disabled = false;
          loadingText.classList.add('load-complete');
          spinner.style.opacity = '0';
          if (spinner) {
            spinner.outerHTML = '<h2>GUAIS</h2>'; 
          }
        }, 3500);
      
        enterButton.addEventListener('click', function() {
          loadingScreen.style.opacity = '0';
          setTimeout(function() {
            loadingScreen.style.display = 'none';
            body.style.overflow = 'auto';
          }, 1000);
          
        });
      });
      window.addEventListener('wheel', function(e) {
        const footer = document.querySelector('#footer');
        const footerBottom = footer.getBoundingClientRect().top + footer.offsetHeight + window.scrollY;
        const distanceToFooterBottom = footerBottom - window.scrollY - window.innerHeight;

        if (e.deltaY < 0) return; // Only prevent scroll up
        if (distanceToFooterBottom <= 0) {
          // If we're scrolling down and we've reached the bottom of the footer, prevent further scrolling
          e.preventDefault(); // Prevent the default scroll behavior
        } else if (distanceToFooterBottom < 200) { // Adjust this value to control when the slow scroll starts
          // If we're close to the bottom of the footer, reduce the scroll speed
          window.scrollBy(0, e.deltaY / 30); // Adjust the divisor to control the scroll speed
          e.preventDefault(); // Prevent the default scroll behavior
        }
      }, { passive: false }); // Use passive: false to allow preventDefault
    </script>
  </body>
</html>
